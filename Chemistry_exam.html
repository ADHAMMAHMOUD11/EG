<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</title>
<style>
body{font-family:"Tajawal",sans-serif;background:#121212;color:white;padding:20px;}
h1,h2{text-align:center;color:#ff9800;}
#examSection{display:none;}
#otpSection{display:none;}
#timer{font-size:20px;text-align:center;margin-bottom:15px;color:#ff9800;}
.question{background:#1e1e1e;padding:15px;border-radius:10px;margin-bottom:10px;border:1px solid #ff9800;}
.question h3{margin-bottom:10px;}
.question label{display:block;margin-bottom:5px;cursor:pointer;}
button{background:#ff9800;color:#000;padding:10px 15px;border:none;border-radius:8px;cursor:pointer;margin-top:10px;}
input[type=text]{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none;background:#2a2a2a;color:white;}
</style>
</head>
<body>

<h1>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</h1>

<div id="phoneSection">
    <h2>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</h2>
    <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 11 Ø±Ù‚Ù…">
    <button onclick="sendOTP()">Ø¥Ø±Ø³Ø§Ù„ OTP</button>
</div>

<div id="otpSection">
    <h2>Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚</h2>
    <input type="text" id="otpInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚">
    <button onclick="verifyOTP()">ØªØ­Ù‚Ù‚</button>
</div>

<div id="examSection">
    <div id="timer">25:00</div>
    <div id="questionsContainer"></div>
    <button onclick="submitExam()">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
</div>

<script>
const BOT_TOKEN ="8182981848:AAFESqf1hVM0JSEvywhXJdk5asGJlOq6q00"; // Ø¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ù‡Ù†Ø§
const CHAT_ID = "7020597309"; // Ø¶Ø¹ Ø§Ù„Ù€ Chat ID Ù‡Ù†Ø§
const examName = "Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡";

let realOTP = "";
let phoneNumber = "";
let startTime = null;
let timerInterval = null;

// 15 Ø³Ø¤Ø§Ù„ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ù…Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
const questions = [
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 1: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ù…Ø§Ø¡ØŸ", options:["H2O","CO2","O2","NaCl"], correct:"H2O"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 2: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°Ø±ÙŠ Ù„Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ØŸ", options:["1","2","8","6"], correct:"1"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 3: Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø·Ø© ÙÙŠ Ø¬Ø²ÙŠØ¡ NaClØŸ", options:["Ø£ÙŠÙˆÙ†ÙŠØ©","ØªØ³Ø§Ù‡Ù…ÙŠØ©","ÙÙ„Ø²ÙŠØ©","Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ÙŠØ©"], correct:"Ø£ÙŠÙˆÙ†ÙŠØ©"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 4: Ù…Ø§ Ù‡Ùˆ PH Ù…Ø­Ù„ÙˆÙ„ Ø§Ù„Ø­Ù…Ø¶ØŸ", options:["Ø£Ù‚Ù„ Ù…Ù† 7","Ø£ÙƒØ«Ø± Ù…Ù† 7","ÙŠØ³Ø§ÙˆÙŠ 7","10"], correct:"Ø£Ù‚Ù„ Ù…Ù† 7"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 5: Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø£ÙƒØ«Ø± ÙˆÙØ±Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙ†ØŸ", options:["Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†","Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†","Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†","Ø§Ù„Ù‡ÙŠÙ„ÙŠÙˆÙ…"], correct:"Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 6: ØµÙŠØºØ© Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†ØŸ", options:["CO2","CO","O2","C2O"], correct:"CO2"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 7: Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØºØ§Ø² Ø§Ù„Ø°ÙŠ Ù„Ø§ Ù„ÙˆÙ† Ù„Ù‡ØŸ", options:["Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†","Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†","Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†","Ø§Ù„Ù‡ÙŠÙ„ÙŠÙˆÙ…"], correct:"Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 8: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø°ÙŠ ÙŠØ±Ù…Ø² Ù„Ù‡ Ø¨Ù€ FeØŸ", options:["Ø§Ù„Ø­Ø¯ÙŠØ¯","Ø§Ù„ÙÙ„ÙˆØ±","Ø§Ù„ÙØ¶Ø©","Ø§Ù„ÙÙˆØ³ÙÙˆØ±"], correct:"Ø§Ù„Ø­Ø¯ÙŠØ¯"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 9: Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¨ÙŠÙ† Ø­Ù…Ø¶ ÙˆÙ‚Ø§Ø¹Ø¯Ø©ØŸ", options:["ØªØ¹Ø§Ø¯Ù„","Ø£ÙƒØ³Ø¯Ø©","Ø§Ø®ØªØ²Ø§Ù„","ØªÙØ§Ø¹Ù„ Ø­Ø±Ø§Ø±ÙŠ"], correct:"ØªØ¹Ø§Ø¯Ù„"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 10: Ù…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ¨ Ø§Ù„Ø·Ø¨Ø§Ø´ÙŠØ±ØŸ", options:["CaCO3","NaCl","H2O","C6H12O6"], correct:"CaCO3"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 11: Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØºØ§Ø² Ø§Ù„Ø°ÙŠ ÙŠØ³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©ØŸ", options:["Ø§Ù„Ù†ÙŠÙˆÙ†","Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†","Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†","Ø§Ù„ÙƒÙ„ÙˆØ±"], correct:"Ø§Ù„Ù†ÙŠÙˆÙ†"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 12: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø£ÙŠÙˆÙ† Ø§Ù„Ù…ÙˆØ¬Ø¨ ÙÙŠ Ø§Ù„Ù…Ù„Ø­ØŸ", options:["Na+","Cl-","O2-","H+"], correct:"Na+"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 13: Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙÙŠ Ø§Ø­ØªØ±Ø§Ù‚ Ø§Ù„Ø®Ø´Ø¨ØŸ", options:["Ø£ÙƒØ³Ø¯Ø©","Ø§Ø®ØªØ²Ø§Ù„","ØªÙØ§Ø¹Ù„ Ø­Ù…Ø¶ÙŠ","ØªØ¹Ø§Ø¯Ù„"], correct:"Ø£ÙƒØ³Ø¯Ø©"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 14: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„ÙŠ Ù„Ù„Ù‡ÙŠÙ„ÙŠÙˆÙ…ØŸ", options:["4","2","3","1"], correct:"4"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 15: Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙƒØ¨ H2SO4ØŸ", options:["Ø­Ù…Ø¶ Ø§Ù„ÙƒØ¨Ø±ÙŠØªÙŠÙƒ","Ø­Ù…Ø¶ Ø§Ù„Ù†ÙŠØªØ±ÙŠÙƒ","Ø§Ù„Ù…Ø§Ø¡","Ø£Ù…ÙˆÙ†ÙŠØ§"], correct:"Ø­Ù…Ø¶ Ø§Ù„ÙƒØ¨Ø±ÙŠØªÙŠÙƒ"}
];

// Ø¥Ø±Ø³Ø§Ù„ OTP
function sendOTP(){
    phoneNumber = document.getElementById("phone").value.trim();
    const regex = /^01[0125][0-9]{8}$/;
    if(!regex.test(phoneNumber)){ alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù…ØµØ±ÙŠ ØµØ­ÙŠØ­"); return; }
    if(localStorage.getItem(`examDone_${examName}_${phoneNumber}`)){
        alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        return;
    }
    realOTP = Math.floor(1000 + Math.random()*9000).toString();
    document.getElementById("phoneSection").style.display="none";
    document.getElementById("otpSection").style.display="block";

    const text = `ğŸ“Œ OTP Ø¬Ø¯ÙŠØ¯\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„ÙƒÙˆØ¯: ${realOTP}\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}`;
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);
}

// ØªØ­Ù‚Ù‚ OTP
function verifyOTP(){
    const otpInput = document.getElementById("otpInput").value.trim();
    if(otpInput===realOTP){
        document.getElementById("otpSection").style.display="none";
        startExam();
    } else alert("ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function startExam(){
    document.getElementById("examSection").style.display="block";
    startTime = new Date();

    const container = document.getElementById("questionsContainer");
    container.innerHTML = "";
    questions.forEach((q,i)=>{
        let html = `<div class="question"><h3>${q.q}</h3>`;
        q.options.forEach(opt=>{
            html+=`<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`;
        });
        html+="</div>";
        container.innerHTML+=html;
    });

    startTimer(25*60);
}

// Ø§Ù„Ø¹Ø¯Ø§Ø¯
function startTimer(seconds){
    const timerEl = document.getElementById("timer");
    let remaining = seconds;
    timerInterval = setInterval(()=>{
        let min = Math.floor(remaining/60);
        let sec = remaining%60;
        timerEl.innerText = `${min.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;
        if(remaining<=0){ clearInterval(timerInterval); submitExam(); }
        remaining--;
    },1000);
}

// ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function submitExam(){
    clearInterval(timerInterval);
    const answers = questions.map((q,i)=>{
        const radios = document.getElementsByName(`q${i}`);
        const selected = Array.from(radios).find(r=>r.checked);
        return selected ? selected.value : "Ù„Ù… ÙŠØ­Ø¯Ø¯";
    });

    const detailedResults = questions.map((q,i)=>{
        const ans = answers[i];
        const status = ans===q.correct ? "ØµØ­ÙŠØ­" : `Ø®Ø·Ø£ (Ø§Ù„ØµØ­ÙŠØ­: ${q.correct})`;
        return `Ø§Ù„Ø³Ø¤Ø§Ù„ ${i+1}: Ø§Ø®ØªØ±Øª ${ans} | ${status}`;
    }).join("\n");

    const endTime = new Date();
    const duration = Math.floor((endTime-startTime)/1000/60);
    const text = `ğŸ“ Ù†ØªÙŠØ¬Ø© Ø§Ù…ØªØ­Ø§Ù†\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„Ù…Ø¯Ø©: ${duration} Ø¯Ù‚ÙŠÙ‚Ø©\nØ§Ù„ØªÙØ§ØµÙŠÙ„:\n${detailedResults}`;
    
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`)
    .then(()=>alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­"))
    .catch(err=>alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"));

    localStorage.setItem(`examDone_${examName}_${phoneNumber}`, "true");
    document.getElementById("examSection").innerHTML="<h2>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>";
}

// Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
window.onload = ()=>{
    const inputPhone = document.getElementById("phone");
    inputPhone.addEventListener("input", ()=>{
        const val = inputPhone.value.trim();
        if(localStorage.getItem(`examDone_${examName}_${val}`)){
            alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            inputPhone.value = "";
        }
    });
};
</script>

</body>
</html>