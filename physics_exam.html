<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</title>
<style>
body{font-family:"Tajawal",sans-serif;background:#121212;color:white;padding:20px;}
h1,h2{text-align:center;color:#ff9800;}
#examSection{display:none;}
#otpSection{display:none;}
#timer{font-size:20px;text-align:center;margin-bottom:15px;color:#ff9800;}
.question{background:#1e1e1e;padding:15px;border-radius:10px;margin-bottom:10px;border:1px solid #ff9800;}
.question h3{margin-bottom:10px;}
.question label{display:block;margin-bottom:5px;cursor:pointer;}
button{background:#ff9800;color:#000;padding:10px 15px;border:none;border-radius:8px;cursor:pointer;margin-top:10px;}
input[type=text]{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none;background:#2a2a2a;color:white;}
</style>
</head>
<body>

<h1>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</h1>

<div id="phoneSection">
    <h2>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</h2>
    <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 11 Ø±Ù‚Ù…">
    <button onclick="sendOTP()">Ø¥Ø±Ø³Ø§Ù„ OTP</button>
</div>

<div id="otpSection">
    <h2>Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚</h2>
    <input type="text" id="otpInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚">
    <button onclick="verifyOTP()">ØªØ­Ù‚Ù‚</button>
</div>

<div id="examSection">
    <div id="timer">25:00</div>
    <div id="questionsContainer"></div>
    <button onclick="submitExam()">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
</div>

<script>
const BOT_TOKEN ="8182981848:AAFESqf1hVM0JSEvywhXJdk5asGJlOq6q00"; // Ø¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ù‡Ù†Ø§
const CHAT_ID = "7020597309"; // Ø¶Ø¹ Ø§Ù„Ù€ Chat ID Ù‡Ù†Ø§
const examName = "Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø£Ø­ÙŠØ§Ø¡";

let realOTP = "";
let phoneNumber = "";
let startTime = null;
let timerInterval = null;

// 15 Ø³Ø¤Ø§Ù„ Ù„Ù„Ø£Ø­ÙŠØ§Ø¡ Ù…Ø¹ Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©
const questions = [
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø­ÙŠØ§Ø©ØŸ", options:["Ø®Ù„ÙŠØ©","Ø¬Ø²ÙŠØ¡","Ø¹Ø¶Ùˆ","Ù†Ø³ÙŠØ¬"], correct:"Ø®Ù„ÙŠØ©"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ø¶Ùˆ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙ†ÙØ³ÙŠØŸ", options:["Ø±Ø¦Ø©","Ù‚Ù„Ø¨","Ù…Ø¹Ø¯Ø©","ÙƒØ¨Ø¯"], correct:"Ø±Ø¦Ø©"},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø¯ÙˆØ± Ø§Ù„Ù…ÙŠØªÙˆÙƒÙˆÙ†Ø¯Ø±ÙŠØ§ØŸ", options:["Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø·Ø§Ù‚Ø©","ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø§Ø¡","Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†","ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø­Ø±Ø§Ø±Ø©"], correct:"Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø·Ø§Ù‚Ø©"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ Ø­Ù…Ø¶ Ù†ÙˆÙˆÙŠØŸ", options:["DNA","RNA","ATP","ADP"], correct:"DNA"},
    {q:"Ù…Ø§ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£ÙˆØ¹ÙŠØ© Ø§Ù„Ø¯Ù…ÙˆÙŠØ©ØŸ", options:["Ù†Ù‚Ù„ Ø§Ù„Ø¯Ù…","Ù†Ù‚Ù„ Ø§Ù„Ø£Ø¹ØµØ§Ø¨","Ù†Ù‚Ù„ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ† ÙÙ‚Ø·","ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø·Ø§Ù‚Ø©"], correct:"Ù†Ù‚Ù„ Ø§Ù„Ø¯Ù…"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ¹ØªØ¨Ø± Ø¨Ø±ÙˆØªÙŠÙ†ØŸ", options:["Ø¥Ù†Ø²ÙŠÙ…","Ø³ÙƒØ±ÙŠØ§Øª","Ø¯Ù‡ÙˆÙ†","Ø£Ø­Ù…Ø§Ø¶ Ù†ÙˆÙˆÙŠØ©"], correct:"Ø¥Ù†Ø²ÙŠÙ…"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø£Ù†Ø³Ø¬Ø©ØŸ", options:["Ø¹Ø¶Ù„ÙŠ","Ø¹ØµØ¨ÙŠ","Ø¯Ù‡Ù†ÙŠ","Ø¬Ù…ÙŠØ¹ Ù…Ø§ Ø³Ø¨Ù‚"], correct:"Ø¬Ù…ÙŠØ¹ Ù…Ø§ Ø³Ø¨Ù‚"},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø¯ÙˆØ± Ø§Ù„ÙƒÙ„ÙˆØ±ÙˆÙÙŠÙ„ØŸ", options:["Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ø¶ÙˆØ¡","ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø­Ø±Ø§Ø±Ø©","ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø§Ø¡","Ù†Ù‚Ù„ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†"], correct:"Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ø¶ÙˆØ¡"},
    {q:"Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠÙ†ØªÙ…ÙŠ Ù„Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†ÙŠØ©ØŸ", options:["Ø¥Ù†Ø³Ø§Ù†","Ø´Ø¬Ø±Ø©","ÙØ·Ø±","Ø¨ÙƒØªÙŠØ±ÙŠØ§"], correct:"Ø¥Ù†Ø³Ø§Ù†"},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ù‡Ø¶Ù…ØŸ", options:["Ù…Ø¹Ø¯Ø©","Ø±Ø¦Ø©","ÙƒØ¨Ø¯","ÙƒÙ„Ù‰"], correct:"Ù…Ø¹Ø¯Ø©"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ§Ø¹ Ø¹Ù† Ø§Ù„Ø¬Ø³Ù…ØŸ", options:["Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ù†Ø§Ø¹Ø©","Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ","Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¹ØµØ¨ÙŠ","Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¯ÙˆØ±ÙŠ"], correct:"Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ù†Ø§Ø¹Ø©"},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø¯ÙˆØ± Ø§Ù„ÙƒÙ„Ù‰ØŸ", options:["ØªÙ†Ù‚ÙŠØ© Ø§Ù„Ø¯Ù…","Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø£Ù†Ø³ÙˆÙ„ÙŠÙ†","ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø£Ø¹ØµØ§Ø¨","ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø­Ø±Ø§Ø±Ø©"], correct:"ØªÙ†Ù‚ÙŠØ© Ø§Ù„Ø¯Ù…"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ¹Ø¯ Ù†Ø§Ù‚Ù„ Ø¹ØµØ¨ÙŠØŸ", options:["Ø¯ÙˆØ¨Ø§Ù…ÙŠÙ†","Ø£Ù†Ø²ÙŠÙ…","Ù‡ÙŠÙ…ÙˆØºÙ„ÙˆØ¨ÙŠÙ†","ATP"], correct:"Ø¯ÙˆØ¨Ø§Ù…ÙŠÙ†"},
    {q:"Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ­ÙˆÙŠ DNAØŸ", options:["Ù†ÙˆØ§Ø© Ø§Ù„Ø®Ù„ÙŠØ©","Ø§Ù„Ù…ÙŠØªÙˆÙƒÙˆÙ†Ø¯Ø±ÙŠØ§","Ø§Ù„Ø±ÙŠØ¨ÙˆØ³ÙˆÙ…","Ø§Ù„Ø¹Ø¶Ùˆ"], correct:"Ù†ÙˆØ§Ø© Ø§Ù„Ø®Ù„ÙŠØ©"},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø°ÙŠ ÙŠØ­Ø¯Ø« ÙÙŠÙ‡ Ø§Ù„Ø§Ù†Ù‚Ø³Ø§Ù… Ø§Ù„Ø®Ù„ÙˆÙŠØŸ", options:["Ø§Ù„Ù…ÙŠØªÙˆØ²","Ø§Ù„Ù…ÙŠØªÙˆØ³ÙŠØ³","Ø§Ù„Ø§Ù†Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ÙŠÙˆØ²ÙŠ","Ø§Ù„Ø§Ù†Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ"], correct:"Ø§Ù„Ù…ÙŠØªÙˆØ²"}
];

// Ø¥Ø±Ø³Ø§Ù„ OTP
function sendOTP(){
    phoneNumber = document.getElementById("phone").value.trim();
    const regex = /^01[0125][0-9]{8}$/;
    if(!regex.test(phoneNumber)){ alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù…ØµØ±ÙŠ ØµØ­ÙŠØ­"); return; }
    if(localStorage.getItem(`examDone_${examName}_${phoneNumber}`)){
        alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        return;
    }
    realOTP = Math.floor(1000 + Math.random()*9000).toString();
    document.getElementById("phoneSection").style.display="none";
    document.getElementById("otpSection").style.display="block";

    // Ø¥Ø±Ø³Ø§Ù„ OTP Ù„Ù„Ø¨ÙˆØª
    const text = `ğŸ“Œ OTP Ø¬Ø¯ÙŠØ¯\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„ÙƒÙˆØ¯: ${realOTP}\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}`;
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`)
    .catch(err=>console.error(err));
}

// ØªØ­Ù‚Ù‚ OTP
function verifyOTP(){
    const otpInput = document.getElementById("otpInput").value.trim();
    if(otpInput===realOTP){
        document.getElementById("otpSection").style.display="none";
        startExam();
    } else alert("ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function startExam(){
    document.getElementById("examSection").style.display="block";
    startTime = new Date();

    const container = document.getElementById("questionsContainer");
    container.innerHTML = "";
    questions.forEach((q,i)=>{
        let html = `<div class="question"><h3>${q.q}</h3>`;
        q.options.forEach(opt=>{
            html+=`<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`;
        });
        html+="</div>";
        container.innerHTML+=html;
    });

    startTimer(25*60); // 25 Ø¯Ù‚ÙŠÙ‚Ø©
}

// Ø§Ù„Ø¹Ø¯Ø§Ø¯
function startTimer(seconds){
    const timerEl = document.getElementById("timer");
    let remaining = seconds;
    timerInterval = setInterval(()=>{
        let min = Math.floor(remaining/60);
        let sec = remaining%60;
        timerEl.innerText = `${min.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;
        if(remaining<=0){ clearInterval(timerInterval); submitExam(); }
        remaining--;
    },1000);
}

// ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function submitExam(){
    clearInterval(timerInterval);
    const answers = questions.map((q,i)=>{
        const radios = document.getElementsByName(`q${i}`);
        const selected = Array.from(radios).find(r=>r.checked);
        return selected ? selected.value : "Ù„Ù… ÙŠØ­Ø¯Ø¯";
    });

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„
    const detailedResults = questions.map((q,i)=>{
        const ans = answers[i];
        const status = ans===q.correct ? "ØµØ­ÙŠØ­" : `Ø®Ø·Ø£ (Ø§Ù„ØµØ­ÙŠØ­: ${q.correct})`;
        return `Ø§Ù„Ø³Ø¤Ø§Ù„ ${i+1}: Ø§Ø®ØªØ±Øª ${ans} | ${status}`;
    }).join("\n");

    const endTime = new Date();
    const duration = Math.floor((endTime-startTime)/1000/60); // Ø¯Ù‚Ø§Ø¦Ù‚
    const text = `ğŸ“ Ù†ØªÙŠØ¬Ø© Ø§Ù…ØªØ­Ø§Ù†\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„Ù…Ø¯Ø©: ${duration} Ø¯Ù‚ÙŠÙ‚Ø©\nØ§Ù„ØªÙØ§ØµÙŠÙ„:\n${detailedResults}`;
    
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`)
    .then(()=>alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­"))
    .catch(err=>alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"));

    // Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
    localStorage.setItem(`examDone_${examName}_${phoneNumber}`, "true");
    document.getElementById("examSection").innerHTML="<h2>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>";
}

// Ù…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ø°Ø§ Ø£ØªÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
window.onload = ()=>{
    const inputPhone = document.getElementById("phone");
    inputPhone.addEventListener("input", ()=>{
        const val = inputPhone.value.trim();
        if(localStorage.getItem(`examDone_${examName}_${val}`)){
            alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            inputPhone.value = "";
        }
    });
};
</script>

</body>
</html>