<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</title>
<style>
body{font-family:"Tajawal",sans-serif;background:#121212;color:white;padding:20px;}
h1,h2{text-align:center;color:#ff9800;}
#examSection{display:none;}
#otpSection{display:none;}
#timer{font-size:20px;text-align:center;margin-bottom:15px;color:#ff9800;}
.question{background:#1e1e1e;padding:15px;border-radius:10px;margin-bottom:10px;border:1px solid #ff9800;}
.question h3{margin-bottom:10px;}
.question label{display:block;margin-bottom:5px;cursor:pointer;}
button{background:#ff9800;color:#000;padding:10px 15px;border:none;border-radius:8px;cursor:pointer;margin-top:10px;}
input[type=text]{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none;background:#2a2a2a;color:white;}
</style>
</head>
<body>

<h1>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h1>

<div id="phoneSection">
    <h2>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</h2>
    <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 11 Ø±Ù‚Ù…">
    <button onclick="sendOTP()">Ø¥Ø±Ø³Ø§Ù„ OTP</button>
</div>

<div id="otpSection">
    <h2>Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚</h2>
    <input type="text" id="otpInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚">
    <button onclick="verifyOTP()">ØªØ­Ù‚Ù‚</button>
</div>

<div id="examSection">
    <div id="timer">25:00</div>
    <div id="questionsContainer"></div>
    <button onclick="submitExam()">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
</div>

<script>
const BOT_TOKEN ="8182981848:AAFESqf1hVM0JSEvywhXJdk5asGJlOq6q00"; 
const CHAT_ID = "7020597309"; 
const examName = "Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©";

let realOTP = "";
let phoneNumber = "";
let startTime = null;
let timerInterval = null;

// 15 Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
const questions = [
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 1: What is the plural of 'mouse'?", options:["mouses","mice","mousees","meese"], correct:"mice"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 2: Choose the correct verb: He ___ football every week.", options:["play","plays","played","playing"], correct:"plays"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 3: What is the opposite of 'hot'?", options:["cold","warm","cool","heat"], correct:"cold"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 4: Fill in: She ___ to school yesterday.", options:["go","goes","went","gone"], correct:"went"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 5: Choose the correct article: I saw ___ elephant.", options:["a","an","the","no article"], correct:"an"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 6: Past tense of 'run'?", options:["run","ran","running","runned"], correct:"ran"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 7: Synonym of 'happy'?", options:["sad","glad","angry","tired"], correct:"glad"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 8: Complete: I ___ never been to London.", options:["have","has","had","having"], correct:"have"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 9: Plural of 'child'?", options:["childs","childes","children","childrens"], correct:"children"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 10: Choose correct: She is ___ than her sister.", options:["tall","taller","tallest","more tall"], correct:"taller"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 11: Opposite of 'easy'?", options:["hard","simple","light","weak"], correct:"hard"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 12: Past form of 'see'?", options:["saw","seen","see","seeing"], correct:"saw"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 13: Synonym of 'big'?", options:["small","large","tiny","short"], correct:"large"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 14: Fill in: They ___ playing in the park now.", options:["is","are","am","be"], correct:"are"},
    {q:"Ø§Ù„Ø³Ø¤Ø§Ù„ 15: Choose correct: I have ___ apples.", options:["some","any","many","much"], correct:"some"}
];

// Ø¥Ø±Ø³Ø§Ù„ OTP
function sendOTP(){
    phoneNumber = document.getElementById("phone").value.trim();
    const regex = /^01[0125][0-9]{8}$/;
    if(!regex.test(phoneNumber)){ alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù…ØµØ±ÙŠ ØµØ­ÙŠØ­"); return; }
    if(localStorage.getItem(`examDone_${examName}_${phoneNumber}`)){
        alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        return;
    }
    realOTP = Math.floor(1000 + Math.random()*9000).toString();
    document.getElementById("phoneSection").style.display="none";
    document.getElementById("otpSection").style.display="block";

    const text = `ğŸ“Œ OTP Ø¬Ø¯ÙŠØ¯\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„ÙƒÙˆØ¯: ${realOTP}\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}`;
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);
}

// ØªØ­Ù‚Ù‚ OTP
function verifyOTP(){
    const otpInput = document.getElementById("otpInput").value.trim();
    if(otpInput===realOTP){
        document.getElementById("otpSection").style.display="none";
        startExam();
    } else alert("ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function startExam(){
    document.getElementById("examSection").style.display="block";
    startTime = new Date();

    const container = document.getElementById("questionsContainer");
    container.innerHTML = "";
    questions.forEach((q,i)=>{
        let html = `<div class="question"><h3>${q.q}</h3>`;
        q.options.forEach(opt=>{
            html+=`<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`;
        });
        html+="</div>";
        container.innerHTML+=html;
    });

    startTimer(25*60);
}

// Ø§Ù„Ø¹Ø¯Ø§Ø¯
function startTimer(seconds){
    const timerEl = document.getElementById("timer");
    let remaining = seconds;
    timerInterval = setInterval(()=>{
        let min = Math.floor(remaining/60);
        let sec = remaining%60;
        timerEl.innerText = `${min.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;
        if(remaining<=0){ clearInterval(timerInterval); submitExam(); }
        remaining--;
    },1000);
}

// ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
function submitExam(){
    clearInterval(timerInterval);
    const answers = questions.map((q,i)=>{
        const radios = document.getElementsByName(`q${i}`);
        const selected = Array.from(radios).find(r=>r.checked);
        return selected ? selected.value : "Ù„Ù… ÙŠØ­Ø¯Ø¯";
    });

    const detailedResults = questions.map((q,i)=>{
        const ans = answers[i];
        const status = ans===q.correct ? "ØµØ­ÙŠØ­" : `Ø®Ø·Ø£ (Ø§Ù„ØµØ­ÙŠØ­: ${q.correct})`;
        return `Ø§Ù„Ø³Ø¤Ø§Ù„ ${i+1}: Ø§Ø®ØªØ±Øª ${ans} | ${status}`;
    }).join("\n");

    const endTime = new Date();
    const duration = Math.floor((endTime-startTime)/1000/60);
    const text = `ğŸ“ Ù†ØªÙŠØ¬Ø© Ø§Ù…ØªØ­Ø§Ù†\nØ§Ù„Ø§Ù…ØªØ­Ø§Ù†: ${examName}\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneNumber}\nØ§Ù„Ù…Ø¯Ø©: ${duration} Ø¯Ù‚ÙŠÙ‚Ø©\nØ§Ù„ØªÙØ§ØµÙŠÙ„:\n${detailedResults}`;
    
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`)
    .then(()=>alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­"))
    .catch(err=>alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"));

    localStorage.setItem(`examDone_${examName}_${phoneNumber}`, "true");
    document.getElementById("examSection").innerHTML="<h2>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>";
}

// Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
window.onload = ()=>{
    const inputPhone = document.getElementById("phone");
    inputPhone.addEventListener("input", ()=>{
        const val = inputPhone.value.trim();
        if(localStorage.getItem(`examDone_${examName}_${val}`)){
            alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            inputPhone.value = "";
        }
    });
};
</script>

</body>
</html>